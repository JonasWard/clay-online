(this["webpackJsonpclay-online"]=this["webpackJsonpclay-online"]||[]).push([[0],{163:function(e,t,n){},165:function(e,t,n){},169:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var r=n(63),o=n.n(r),i=n(150),a=n.n(i),c=(n(163),n(23)),s=n(11);function u(e,t,n,r,o,i){var a=new s.TubeGeometry(e,t,n,r,o);return new s.Mesh(a,i)}var l={vertexShader:"\n            varying vec3 v_Normal;\n            void main() {\n                v_Normal = normal;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }",fragmentShader:"\n            varying vec3 v_Normal;\n            void main() {\n                gl_FragColor = vec4(v_Normal * .8, .8);\n                // vec3 grid = abs(fract(coord - 0.5) - 0.5) / fwidth(coord);\n    \n            }",transparent:!0,uniforms:{}},v={vertexShader:"\n            varying vec3 v_Position;\n            void main() {\n                v_Position = position;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }",fragmentShader:"\n            varying vec3 v_Position;\n            void main() {\n                vec3 grid = abs(fract(v_Position - .5) - .5) / fwidth(v_Position);\n                float line = min(min(grid.x, grid.y), grid.z);\n                float value = 2.5- min(line, 2.5);\n                float transparency = .1 + value * .9;\n\n                gl_FragColor = vec4(vec3(0.), transparency);\n                // vec3 grid = abs(fract(coord - 0.5) - 0.5) / fwidth(coord);\n            }",transparent:!0,uniforms:{},extensions:{derivatives:!0}},h=n(157),f=n(153),d=n(98),g=n(71),y=(n(171),n(154));function w(e){var t=new h.a;return t.setSites(e),t.setTolerance(.01),t.getTriangles(new g.b)}function p(e){var t={},n={},r={};for(var o in e._geometries){var i=e.getGeometryN(o).getCoordinates();if(4===i.length){var a=[0,0,0];for(var c in[0,1,2]){var u=i[c],l=JSON.stringify({x:u.x,y:u.y,z:.1}),v=Object.keys(t).length;l in t?a[c]=t[l]:(t[l]=v,r[l]=new s.Vector3(u.x,u.y,.1),a[c]=v)}for(var h in[0,1,2]){var f=a[h],d=a[(h+1)%3],g=Math.min(f,d),y=Math.max(f,d);n[JSON.stringify([g,y])]=[g,y]}}}var w={};for(var p in t){w[t[p]]=r[p]}var m=[];for(var b in n){var V=n[b][0],P=n[b][1],j=new s.LineCurve(w[V],w[P]);m.push(j)}return m}function m(e){var t=new s.BufferGeometry,n=[];for(var r in e._geometries){var o=e.getGeometryN(r).getCoordinates();if(4===o.length)for(var i in[0,1,2]){var a=o[i];n.push(a.x),n.push(a.y),n.push(.1)}}var c=new Float32Array(n);return t.setAttribute("position",new s.BufferAttribute(c,3)),t.computeVertexNormals(),t}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;return d.a.bufferOp(e,t,n)}function V(e,t){return e.intersection(t)}function P(e){var t=function(e){return 1===e.length?e[0]:(new g.b).createGeometryCollection(e).union()}(e);return y.a.union(t)}function j(){var e,t=function(e){var t,n=new f.a,r=[],o=Object(c.a)(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push(n.read(i))}}catch(a){o.e(a)}finally{o.f()}return r}(["POINT (-20 0)","POINT (20 0)","POINT (0 15)"]),n=[],r=Object(c.a)(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.push(d.a.bufferOp(o,30,100))}}catch(i){r.e(i)}finally{r.f()}return P(n)}function O(){return function(e){var t=w(e);return{buffer:m(t),edges:p(t)}}(j())}var x=n(89),C=n(0),M=n(1),k=n(4),z=n(5),I=n(152),N=function(e){Object(k.a)(n,e);var t=Object(z.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Object(C.a)(this,n),(e=t.call(this)).scale=r,e}return Object(M.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3,n=3*e-1.5,r=Math.sin(2*Math.PI*e),o=0;return t.set(n,r,o).multiplyScalar(this.scale)}}]),n}(s.Curve),S=(s.Curve,function(e){Object(k.a)(n,e);var t=Object(z.a)(n);function n(e){var r,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(C.a)(this,n),(r=t.call(this)).points=e,r.closed=o,r.init(),r}return Object(M.a)(n,[{key:"init",value:function(){this.dirs=this.getDirs(),this.arcLengthDivisions=this.getPointCount()}},{key:"getPointCount",value:function(){return this.closed?this.points.length:this.points.length-1}},{key:"getDirs",value:function(){for(var e=[],t=0;t<this.getPointCount();t++){var n=this.points[t],r=this.points[(t+1)%this.getPointCount()],o=(new s.Vector3).subVectors(r,n);e.push(o)}return e}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){if(this.cacheArcLengths&&this.cacheArcLengths.length===this.getPointCount()+1&&!this.needsUpdate)return this.cacheArcLengths;var e=0;this.cacheArcLengths=[e];var t,n=Object(c.a)(this.dirs);try{for(n.s();!(t=n.n()).done;){e+=t.value.length(),this.cacheArcLengths.push(e)}}catch(r){n.e(r)}finally{n.f()}return this.cacheArcLengths}},{key:"getTangentAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3;return this.getTangent(e*this.getPointCount(),t)}},{key:"getTangent",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3,r=e%1,o=e-e%1;if(isNaN(e))return null;if(e>0&&e<this.getPointCount())if(r<1e-4){var i=(new s.Vector3).copy(this.dirs[o]),a=(new s.Vector3).copy(this.dirs[o-1]);a.normalize(),i.normalize(),t=(new s.Vector3).addVectors(a,i)}else t=(new s.Vector3).copy(this.dirs[o]);if(this.closed)if(o%=this.getPointCount(),r<1e-4){var c=(new s.Vector3).copy(this.dirs[o]),u=(new s.Vector3).copy(this.dirs[(o+this.getPointCount()-1)%this.getPointCount()]);u.normalize(),c.normalize(),t=(new s.Vector3).addVectors(u,c)}else t=(new s.Vector3).copy(this.dirs[o]);else t=e<1?(new s.Vector3).copy(this.dirs[0]):(new s.Vector3).copy(this.dirs[this.dirs.length-1]);return t.normalize(),n.set(t.x,t.y,t.z)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new s.Vector3,r=[],o=[],i=[],a=new s.Vector3,c=new s.Matrix4,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new s.Vector3)}o[0]=new s.Vector3,i[0]=new s.Vector3;var v=Number.MAX_VALUE,h=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=v&&(v=h,n.set(1,0,0)),f<=v&&(v=f,n.set(0,1,0)),d<=v&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),o[0].crossVectors(r[0],a),i[0].crossVectors(r[0],o[0]);for(var g=1;g<=e;g++){if(o[g]=o[g-1].clone(),i[g]=i[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();var y=Math.acos(Object(I.a)(r[g-1].dot(r[g]),-1,1));o[g].applyMatrix4(c.makeRotationAxis(a,y))}i[g].crossVectors(r[g],o[g])}if(!0===t){var w=Math.acos(Object(I.a)(o[0].dot(o[e]),-1,1));w/=e,r[0].dot(a.crossVectors(o[0],o[e]))>0&&(w=-w);for(var p=1;p<=e;p++)o[p].applyMatrix4(c.makeRotationAxis(r[p],w*p)),i[p].crossVectors(r[p],o[p])}return{tangents:r,normals:o,binormals:i}}},{key:"_tConstraining",value:function(e){var t=e%1,n=e-t;return this.closed?n%=this.getPointCount():n<0?(t+=n,n=0):n>=this.getPointCount()&&(t+=n-this.getPointCount(),n=this.getPointCount()),{locT:t,t0:n}}},{key:"getPointAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3;return this.getPoint(e,t)}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3;e*=this.getPointCount();var n=this._tConstraining(e),r=n.locT,o=n.t0,i=this.points[o],a=this.dirs[o],c=(new s.Vector3).addVectors(i,(new s.Vector3).addScaledVector(a,r));return t.set(c.x,c.y,c.z)}},{key:"moveToHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Object(c.a)(this.points);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.z=t}}catch(o){n.e(o)}finally{n.f()}}},{key:"makeMeWave",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=2*e*Math.PI/this.getPointCount(),r=0,o=0;o<this.getPointCount();o++)this.points[o].z+=t*Math.sin(r),r+=n;this.init()}}]),n}(s.Curve)),T=function(){function e(t){Object(C.a)(this,e),this.clayPoints=t}return Object(M.a)(e,[{key:"toPolygon",value:function(){var e,t=[],n=Object(c.a)(this.clayPoints);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.toCoordinate())}}catch(o){n.e(o)}finally{n.f()}return t.push(t[0]),(new g.b).createPolygon(t)}},{key:"toPolyline",value:function(){var e,t=[],n=Object(c.a)(this.clayPoints);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.toVector3())}}catch(o){n.e(o)}finally{n.f()}return new S(t)}},{key:"moveToHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Object(c.a)(this.clayPoints);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.z=t}}catch(o){n.e(o)}finally{n.f()}}}]),e}();(new g.b).createLinearRing();function A(e){var t;return t=isNaN(e.z)?0:e.z,new s.Vector3(e.x,e.y,t)}function _(e){var t,n=[],r=Object(c.a)(e.getCoordinates());try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push(A(o))}}catch(i){r.e(i)}finally{r.f()}return n.pop(),new S(n)}function L(e){var t=[];if("MultiPolygon"===e.constructor.name){var n,r=Object(c.a)(e._geometries);try{for(r.s();!(n=r.n()).done;){var o,i=n.value,a=Object(c.a)(L(i));try{for(a.s();!(o=a.n()).done;){var s=o.value;t.push(s)}}catch(f){a.e(f)}finally{a.f()}}}catch(f){r.e(f)}finally{r.f()}return t}var u,l=function(e){var t=[];t.push(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)t.push(e.getInteriorRingN(n));return t}(e),v=Object(c.a)(l);try{for(v.s();!(u=v.n()).done;){var h=u.value;t.push(_(h))}}catch(f){v.e(f)}finally{v.f()}return t}var R=n(3);function F(e){var t=(new g.b).createPolygon(function(e){var t,n,r=[],o=Object(c.a)(e.points);try{for(o.s();!(t=o.n()).done;){var i=t.value;r.push((n=i,new R.a(n.x,n.y,n.z)))}}catch(a){o.e(a)}finally{o.f()}return r.push(r[0]),r}(e));return t}var E=n(11).Vector3,G=n(89).ClayPoint;function D(e){return-.08*e+40}function H(e,t,n,r,o,i){for(var a=Math.ceil(n*e/t),c=n/a,s=0;s<a;s++){var u=r+c*s,l=Math.cos(u),v=Math.sin(u),h=e*l,f=e*v;i.push(new G(new E(o.x+h,o.y+f,o.z),new E(l,v,0)))}}function W(e,t,n,r){for(var o=e.distanceTo(t),i=Math.ceil(o/n),a=(new E).addScaledVector((new E).subVectors(t,e),1/i),c=new E(-a.y/a.length(),a.x/a.length()),s=0;s<i;s++){var u=(new E).addVectors(e,(new E).addScaledVector(a,s));r.push(new G(u,c))}}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new E(-75,0,e),n=new E(75,0,e),r=[];H(75,5,Math.PI,.5*Math.PI,t,r);var o=new E(-75,-75,e),i=new E(75,-75,e);W(o,i,5,r),H(75,5,Math.PI,-.5*Math.PI,n,r);var a=new E(75,75,e),c=new E(-75,75,e);W(a,c,5,r);var s=new T(r);return s}function J(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(new E).addScaledVector((new E).subVectors(t,e),1/n),i=[],a=0,c=n+1;r||(a=1,c=n);for(var s=a;s<c;s++){var u=(new E).addVectors(e,(new E).addScaledVector(o,s));i.push(u)}return i}function U(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.PI,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,i=n/o,a=[],c=0;c<o;c++){var s=r+c*i,u=t*Math.cos(s),l=t*Math.sin(s);a.push(new E(e.x+u,e.y+l,0))}return new S(a)}function q(e){return new S([new E(e.x+30,e.y,0),new E(e.x,e.y+50,0),new E(e.x-30,e.y,0),new E(e.x,e.y-50,0)])}function K(e,t,n){return new S([new E(e.x+.5*t,e.y+.5*n,0),new E(e.x-.5*t,e.y+.5*n,0),new E(e.x-.5*t,e.y-.5*n,0),new E(e.x+.5*t,e.y-.5*n,0)])}function X(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=new E(-110,0),r=new E(110,0),o=J(n,r,4,!1),i=[],a=Object(c.a)(o);try{for(a.s();!(e=a.n()).done;){var s=e.value,u=q(s),l=K(s,5,300);i.push(u),i.push(l)}}catch(w){a.e(w)}finally{a.f()}var v=D(t);i.push(U(n,.5*v,2*Math.PI,0,60)),i.push(U(r,.5*v,2*Math.PI,0,60)),i.push(K(n,5,300)),i.push(K(r,5,300)),i.push(K(new E(0,0,0),450,5));for(var h=[],f=0,d=i;f<d.length;f++){var g=d[f];h.push(F(g))}var y=P(h);return y}function Z(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=B(t),r=n.toPolygon(),o=b(r,-5,1),i=X(t),a=V(o,i),s=L(a),u=Object(c.a)(L(r));try{for(u.s();!(e=u.n()).done;){var l=e.value;s.push(l)}}catch(d){u.e(d)}finally{u.f()}var v,h=Object(c.a)(s);try{for(h.s();!(v=h.n()).done;){var f=v.value;f.moveToHeight(t)}}catch(d){h.e(d)}finally{h.f()}return s}function Q(){return new s.ShaderMaterial(v)}function Y(){var e,t=L(j()),n=new s.ShaderMaterial(l),r=[],o=Object(c.a)(t);try{for(o.s();!(e=o.n()).done;){var i=e.value;i.makeMeWave(4,10),r.push(u(i,i.getPointCount(),.5,6,!1,n))}}catch(a){o.e(a)}finally{o.f()}return r}function $(e){e.add(function(){var e=Q();return u(new N(10),100,2,32,!1,e)}());for(var t=1.25;t<160;t+=2.5){var n,r=Object(c.a)(Z(t));try{for(r.s();!(n=r.n()).done;){var o=n.value,i=u(o,o.getPointCount(),1.5,6,!1,new s.ShaderMaterial(l));e.add(i)}}catch(f){r.e(f)}finally{r.f()}}Object(x.clayPointTest)(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[new x.ClayPoint(new s.Vector3(.5,.5,0),new s.Vector3(1,1,0)),new x.ClayPoint(new s.Vector3(-.5,.5,0),new s.Vector3(-1,1,0)),new x.ClayPoint(new s.Vector3(-.5,-.5,0),new s.Vector3(-1,-1,0)),new x.ClayPoint(new s.Vector3(.5,-.5,0),new s.Vector3(1,-1,0))];new T(t),e||console.log("is null !!!")}(e);var a,v=Object(c.a)(Y());try{for(v.s();!(a=v.n()).done;){var h=a.value;e.add(h)}}catch(f){v.e(f)}finally{v.f()}}function ee(e,t,n){if(e&&t&&n){var r=e.current,o=r.clientWidth,i=r.clientHeight;n&&(n.aspect=o/i,n.updateProjectionMatrix()),t.setSize(o,i)}}var te=n(155);function ne(e,t,n){var r={frameId:null};return r.frameId=requestAnimationFrame((function(){return re(e,t,n,r)})),r}function re(e,t,n,r){e.clear("#ddd"),e.render(t,n),r.frameId=requestAnimationFrame((function(){return re(e,t,n,r)}))}function oe(e){var t=new s.Scene;$(t),O();var n=function(){var e=new s.WebGL1Renderer({antialias:!0,alpha:!0});return e.setClearColor("#ffff99"),e.setPixelRatio(window.devicePixelRatio),e}();e.current.appendChild(n.domElement);var r=function(e){var t=e.clientWidth,n=e.clientHeight,r=new s.PerspectiveCamera(45,t/n);return r.position.z=20,r}(e.current);t.add(r);var o=function(e,t){var n=new te.a(e,t.domElement);return n.enableRotate=!0,n.enableKeys=!0,n.target.set(0,0),n.update(),n}(r,n);return ee(e,n,r),{scene:t,renderer:n,camera:r,frameId:ne(n,t,r),orbitControls:o}}function ie(e,t,n){!function(e){var t=e.frameId;cancelAnimationFrame(t)}(n.frameId),e.current.removeChild(t.domElement)}n(165);var ae=n(158),ce=n(151);n(173);n(169);var se=n(61);var ue=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useRef)(null);return Object(r.useEffect)((function(){console.log(e);var r=oe(e),o=(r.scene,r.camera),i=r.renderer,a=r.frameId;return t.current=i,n.current=o,function(e){var t=new ce.a,n={usdz:function(){console.log("export USDZ !?")}};return t.add(n,"usdz"),t}(),function(){ie(e,i,a)}}),[t,n]),Object(se.jsx)(ae.a,{bounds:!0,onResize:function(){ee(e,t.current,n.current)},children:function(t){var n=t.measureRef;return Object(se.jsx)("div",{className:"simple-3d",ref:n,children:Object(se.jsx)("div",{className:"three-canvas",ref:e,tabIndex:0})})}})};var le=function(){return Object(se.jsxs)("div",{className:"app",children:[Object(se.jsx)("div",{className:"container",children:Object(se.jsx)(ue,{})}),Object(se.jsx)("a",{id:"link",rel:"ar",href:"",download:"asset.usdz",children:Object(se.jsx)("img",{id:"button",width:"100",src:"files/arkit.png"})})]})},ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,174)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),i(e),a(e)}))};a.a.render(Object(se.jsx)(o.a.StrictMode,{children:Object(se.jsx)(le,{})}),document.getElementById("root")),ve()},89:function(e,t,n){"use strict";n.r(t),n.d(t,"ClayPoint",(function(){return c})),n.d(t,"clayPointTest",(function(){return s}));var r=n(0),o=n(1),i=n(11),a=n(71),c=function(){function e(t,n){Object(r.a)(this,e),this.origin=t,this.position=(new i.Vector3).copy(t),this.direction=n}return Object(o.a)(e,[{key:"move",value:function(e){this.position=(new i.Vector3).addVectors(this.position,(new i.Vector3).addScaledVector(this.direction,e))}},{key:"set",value:function(e){this.position=(new i.Vector3).addVectors(this.origin,(new i.Vector3).addScaledVector(this.direction,e))}},{key:"toCoordinate",value:function(){return new a.a(this.position.x,this.position.y,this.position.z)}},{key:"toVector3",value:function(){return(new i.Vector3).copy(this.position)}}]),e}();function s(){var e=new i.Vector3(0,0,0),t=new i.Vector3(1,0,0),n=new c(e,t);n.move(1),n.set(10)}}},[[172,1,2]]]);
//# sourceMappingURL=main.d809cb78.chunk.js.map