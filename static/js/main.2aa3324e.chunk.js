(this["webpackJsonpclay-online"]=this["webpackJsonpclay-online"]||[]).push([[0],{162:function(e,t,n){},164:function(e,t,n){},168:function(e,t,n){},171:function(e,t,n){"use strict";n.r(t);var r=n(63),i=n.n(r),a=n(149),o=n.n(a),s=(n(162),n(23)),c=n(9);function u(e,t,n,r,i,a){var o=new c.p(e,t,n,r,i);return new c.h(o,a)}var h={vertexShader:"\n            varying vec3 v_Normal;\n            void main() {\n                v_Normal = normal;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }",fragmentShader:"\n            varying vec3 v_Normal;\n            void main() {\n                gl_FragColor = vec4(v_Normal * .8, .8);\n                // vec3 grid = abs(fract(coord - 0.5) - 0.5) / fwidth(coord);\n    \n            }",transparent:!0,uniforms:{}},l=n(156),v=n(152),f=n(97),d=n(71),g=(n(170),n(153));function y(e){var t=new l.a;return t.setSites(e),t.setTolerance(.01),t.getTriangles(new d.b)}function p(e){var t={},n={},r={};for(var i in e._geometries){var a=e.getGeometryN(i).getCoordinates();if(4===a.length){var o=[0,0,0];for(var s in[0,1,2]){var u=a[s],h=JSON.stringify({x:u.x,y:u.y,z:.1}),l=Object.keys(t).length;h in t?o[s]=t[h]:(t[h]=l,r[h]=new c.r(u.x,u.y,.1),o[s]=l)}for(var v in[0,1,2]){var f=o[v],d=o[(v+1)%3],g=Math.min(f,d),y=Math.max(f,d);n[JSON.stringify([g,y])]=[g,y]}}}var p={};for(var w in t){p[t[w]]=r[w]}var m=[];for(var b in n){var P=n[b][0],j=n[b][1],O=new c.e(p[P],p[j]);m.push(O)}return m}function w(e){var t=new c.b,n=[];for(var r in e._geometries){var i=e.getGeometryN(r).getCoordinates();if(4===i.length)for(var a in[0,1,2]){var o=i[a];n.push(o.x),n.push(o.y),n.push(.1)}}var s=new Float32Array(n);return t.setAttribute("position",new c.a(s,3)),t.computeVertexNormals(),t}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;return f.a.bufferOp(e,t,n)}function b(e,t){return e.difference(t)}function P(e,t){return e.intersection(t)}function j(e){var t=function(e){return 1===e.length?e[0]:(new d.b).createGeometryCollection(e).union()}(e);return g.a.union(t)}function O(){var e,t=function(e){var t,n=new v.a,r=[],i=Object(s.a)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.push(n.read(a))}}catch(o){i.e(o)}finally{i.f()}return r}(["POINT (-20 0)","POINT (20 0)","POINT (0 15)"]),n=[],r=Object(s.a)(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push(f.a.bufferOp(i,30,100))}}catch(a){r.e(a)}finally{r.f()}return j(n)}function x(){return function(e){var t=y(e);return{buffer:w(t),edges:p(t)}}(O())}var M=n(0),C=n(1),V=function(){function e(t,n){Object(M.a)(this,e),this.origin=t,this.position=(new c.r).copy(t),this.direction=n}return Object(C.a)(e,[{key:"move",value:function(e){this.position=(new c.r).addVectors(this.position,(new c.r).addScaledVector(this.direction,e))}},{key:"set",value:function(e){this.position=(new c.r).addVectors(this.origin,(new c.r).addScaledVector(this.direction,e))}},{key:"toCoordinate",value:function(){return new d.a(this.position.x,this.position.y,this.position.z)}},{key:"toVector3",value:function(){return new c.r(this.position.x,this.position.z,-this.position.y)}}]),e}();var k=n(4),I=n(5),z=n(151),N=(c.c,c.c,function(e){Object(k.a)(n,e);var t=Object(I.a)(n);function n(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(M.a)(this,n),(r=t.call(this)).points=e,r.closed=i,r.init(),r}return Object(C.a)(n,[{key:"init",value:function(){this.dirs=this.getDirs(),this.arcLengthDivisions=this.getPointCount()}},{key:"getPointCount",value:function(){return this.closed?this.points.length:this.points.length-1}},{key:"getDirs",value:function(){for(var e=[],t=0;t<this.getPointCount();t++){var n=this.points[t],r=this.points[(t+1)%this.getPointCount()],i=(new c.r).subVectors(r,n);e.push(i)}return e}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){if(this.cacheArcLengths&&this.cacheArcLengths.length===this.getPointCount()+1&&!this.needsUpdate)return this.cacheArcLengths;var e=0;this.cacheArcLengths=[e];var t,n=Object(s.a)(this.dirs);try{for(n.s();!(t=n.n()).done;){e+=t.value.length(),this.cacheArcLengths.push(e)}}catch(r){n.e(r)}finally{n.f()}return this.cacheArcLengths}},{key:"getTangentAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.r;return this.getTangent(e*this.getPointCount(),t)}},{key:"getTangent",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.r,r=e%1,i=e-e%1;if(isNaN(e))return null;if(e>0&&e<this.getPointCount())if(r<1e-4){var a=(new c.r).copy(this.dirs[i]),o=(new c.r).copy(this.dirs[i-1]);o.normalize(),a.normalize(),t=(new c.r).addVectors(o,a)}else t=(new c.r).copy(this.dirs[i]);if(this.closed)if(i%=this.getPointCount(),r<1e-4){var s=(new c.r).copy(this.dirs[i]),u=(new c.r).copy(this.dirs[(i+this.getPointCount()-1)%this.getPointCount()]);u.normalize(),s.normalize(),t=(new c.r).addVectors(u,s)}else t=(new c.r).copy(this.dirs[i]);else t=e<1?(new c.r).copy(this.dirs[0]):(new c.r).copy(this.dirs[this.dirs.length-1]);return t.normalize(),n.set(t.x,t.y,t.z)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new c.r,r=[],i=[],a=[],o=new c.r,s=new c.g,u=0;u<=e;u++){var h=u/e;r[u]=this.getTangentAt(h,new c.r)}i[0]=new c.r,a[0]=new c.r;var l=Number.MAX_VALUE,v=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);v<=l&&(l=v,n.set(1,0,0)),f<=l&&(l=f,n.set(0,1,0)),d<=l&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),a[0].crossVectors(r[0],i[0]);for(var g=1;g<=e;g++){if(i[g]=i[g-1].clone(),a[g]=a[g-1].clone(),o.crossVectors(r[g-1],r[g]),o.length()>Number.EPSILON){o.normalize();var y=Math.acos(Object(z.a)(r[g-1].dot(r[g]),-1,1));i[g].applyMatrix4(s.makeRotationAxis(o,y))}a[g].crossVectors(r[g],i[g])}if(!0===t){var p=Math.acos(Object(z.a)(i[0].dot(i[e]),-1,1));p/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(p=-p);for(var w=1;w<=e;w++)i[w].applyMatrix4(s.makeRotationAxis(r[w],p*w)),a[w].crossVectors(r[w],i[w])}return{tangents:r,normals:i,binormals:a}}},{key:"_tConstraining",value:function(e){var t=e%1,n=e-t;return this.closed?n%=this.getPointCount():n<0?(t+=n,n=0):n>=this.getPointCount()&&(t+=n-this.getPointCount(),n=this.getPointCount()),{locT:t,t0:n}}},{key:"getPointAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.r;return this.getPoint(e,t)}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new c.r;e*=this.getPointCount();var n=this._tConstraining(e),r=n.locT,i=n.t0,a=this.points[i],o=this.dirs[i],s=(new c.r).addVectors(a,(new c.r).addScaledVector(o,r));return t.set(s.x,s.y,s.z)}},{key:"moveToHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Object(s.a)(this.points);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.y=t}}catch(i){n.e(i)}finally{n.f()}}},{key:"makeMeWave",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=2*e*Math.PI/this.getPointCount(),r=0,i=0;i<this.getPointCount();i++)this.points[i].z+=t*Math.sin(r),r+=n;this.init()}},{key:"cadFlip",value:function(){var e,t=Object(s.a)(this.points);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.set(n.x,n.z,-n.y)}}catch(r){t.e(r)}finally{t.f()}}}]),n}(c.c)),S=function(){function e(t){Object(M.a)(this,e),this.clayPoints=t}return Object(C.a)(e,[{key:"toPolygon",value:function(){var e,t=[],n=Object(s.a)(this.clayPoints);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.toCoordinate())}}catch(i){n.e(i)}finally{n.f()}return t.push(t[0]),(new d.b).createPolygon(t)}},{key:"toPolyline",value:function(){var e,t=[],n=Object(s.a)(this.clayPoints);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.toVector3())}}catch(i){n.e(i)}finally{n.f()}return new N(t)}},{key:"moveToHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Object(s.a)(this.clayPoints);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.z=t}}catch(i){n.e(i)}finally{n.f()}}},{key:"applyPattern",value:function(e,t){if(t.uv){var n,r=Object(s.a)(this.clayPoints);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.set(e(i.uvValue,t))}}catch(u){r.e(u)}finally{r.f()}}else{var a,o=Object(s.a)(this.clayPoints);try{for(o.s();!(a=o.n()).done;){var c=a.value;c.set(e(c.origin,t))}}catch(u){o.e(u)}finally{o.f()}}}},{key:"toThreePolyline",value:function(){var e,t=[],n=Object(s.a)(this.clayPoints);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.toVector3())}}catch(i){n.e(i)}finally{n.f()}return new N(t)}}]),e}();(new d.b).createLinearRing();function T(e){var t;return t=isNaN(e.z)?0:e.z,new c.r(e.x,t,-e.y)}function A(e){var t,n=[],r=Object(s.a)(e.getCoordinates());try{for(r.s();!(t=r.n()).done;){var i=t.value;n.push(T(i))}}catch(a){r.e(a)}finally{r.f()}return n.pop(),new N(n)}function L(e){var t=[];if("MultiPolygon"===e.constructor.name){var n,r=Object(s.a)(e._geometries);try{for(r.s();!(n=r.n()).done;){var i,a=n.value,o=Object(s.a)(L(a));try{for(o.s();!(i=o.n()).done;){var c=i.value;t.push(c)}}catch(f){o.e(f)}finally{o.f()}}}catch(f){r.e(f)}finally{r.f()}return t}var u,h=function(e){var t=[];t.push(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)t.push(e.getInteriorRingN(n));return t}(e),l=Object(s.a)(h);try{for(l.s();!(u=l.n()).done;){var v=u.value;t.push(A(v))}}catch(f){l.e(f)}finally{l.f()}return t}var F=n(3);function H(e){var t=(new d.b).createPolygon(function(e){var t,n,r=[],i=Object(s.a)(e.points);try{for(i.s();!(t=i.n()).done;){var a=t.value;r.push((n=a,new F.a(n.x,n.y,n.z)))}}catch(o){i.e(o)}finally{i.f()}return r.push(r[0]),r}(e));return t}var D,R,_,W,E=2.5,q=150,B=300,J=2,G=220,U=50,K=110,X=3,Z=40,Q=20,Y=250,$=(Q-Z)/Y,ee=60,te=2.5,ne=160,re=260,ie=-100,ae=2.5;function oe(e){return $*e+Z}function se(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=n*e,s=t+o,u=Math.cos(s),h=Math.sin(s),l=r*u,v=r*h,f=new V(new c.r(i.x+l,i.y+v,i.z),new c.r(u,h,0));return f.uvValue=new c.q(a+o*r,i.z),f}function ce(e,t,n,r,i,a){for(var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=Math.ceil(n*e/t),c=n/s,u=0;u<s;u++){var h=se(u,r,c,e,i,o);a.push(h)}return n*e+o}function ue(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e.distanceTo(t),o=Math.ceil(a/n),s=(new c.r).addScaledVector((new c.r).subVectors(t,e),1/o),u=s.length(),h=new c.r(s.y/u,-s.x/u),l=0;l<o;l++){var v=(new c.r).addVectors(e,(new c.r).addScaledVector(s,l)),f=new V(v,h);f.uvValue=new c.q(i+l*u,e.z),r.push(f)}return a+i}function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new c.r(.5*-(B-q),0,e),n=new c.r(.5*(B-q),0,e),r=[],i=0;i=ce(.5*q,te,.5*Math.PI,Math.PI,t,r,i);var a=new c.r(.5*-(B-q),.5*-q,e),o=new c.r(.5*(B-q),.5*-q,e);i=ue(a,o,te,r,i),i=ce(.5*q,te,Math.PI,-.5*Math.PI,n,r,i);var s=new c.r(.5*(B-q),.5*q,e),u=new c.r(.5*-(B-q),.5*q,e);i=ue(s,u,te,r,i),ce(.5*q,te,.5*Math.PI,.5*Math.PI,t,r,i);var h=new S(r);return h}function le(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=(new c.r).addScaledVector((new c.r).subVectors(t,e),1/n),a=[],o=0,s=n+1;r||(o=1,s=n);for(var u=o;u<s;u++){var h=(new c.r).addVectors(e,(new c.r).addScaledVector(i,u));a.push(h)}return a}function ve(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.PI,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,a=n/i,o=[],s=0;s<i;s++){var u=r+s*a,h=t*Math.cos(u),l=t*Math.sin(u);o.push(new c.r(e.x+h,e.y+l,0))}return new N(o)}function fe(e){return new N([new c.r(e.x+.5*U,e.y,0),new c.r(e.x,e.y+.5*K,0),new c.r(e.x-.5*U,e.y,0),new c.r(e.x,e.y-.5*K,0)])}function de(e,t,n){return new N([new c.r(e.x+.5*t,e.y+.5*n,0),new c.r(e.x-.5*t,e.y+.5*n,0),new c.r(e.x-.5*t,e.y-.5*n,0),new c.r(e.x+.5*t,e.y-.5*n,0)])}function ge(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=le(_,W,X+1,!1),r=[],i=Object(s.a)(n);try{for(i.s();!(e=i.n()).done;){var a=e.value,o=fe(a),u=de(a,E,q*J);r.push(o),r.push(u)}}catch(y){i.e(y)}finally{i.f()}var h=oe(t);r.push(ve(_,.5*h,2*Math.PI,0,ee)),r.push(ve(W,.5*h,2*Math.PI,0,ee)),r.push(de(_,E,q*J)),r.push(de(W,E,q*J)),r.push(de(new c.r(0,0,0),B+q*(J-1),E));for(var l=[],v=0,f=r;v<f.length;v++){var d=f[v];l.push(H(d))}var g=j(l);return g}function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=he(e);t.applyPattern(D,R);var n=t.toPolygon(),r=m(n,-E,1),i=.5*(B+q*(J-1)),a=de(new c.r(.5*-i,0,0),i,E),o=H(a),s=j([r,o]),u=ge(e),h=P(s,u),l=b(n,h),v=L(l);return v}function pe(e){var t=[],n=oe(e),r=ve(_,.5*n,2*Math.PI,0,ee),i=ve(W,.5*n,2*Math.PI,0,ee);return r.cadFlip(),i.cadFlip(),t.push(r),t.push(i),t}function we(e){_=new c.r(.5*-G,0),W=new c.r(.5*G,0),function(e){E=e.productionWidth,q=e.baseWidth,B=e.baseLength,J=e.lengthBufferMultiplier,G=e.pinSpacing,U=e.diamondWidth,K=e.diamondHeight,X=e.diamondCount,Z=e.pinDiameter0,Q=e.pinDiameter1,Y=e.pinDelta,ee=e.pinDivisions,te=e.precision,ne=e.bodyHeight,re=e.totalHeight,ie=e.startHeight,ae=e.layerHeight,D=e.pattern.patternFunction,R=e.pattern.patternParameters}(e),$=(Q-Z)/Y;for(var t=[],n=0;n<ne;n+=ae){var r,i=Object(s.a)(ye(n));try{for(i.s();!(r=i.n()).done;){var a=r.value;a.moveToHeight(n+ie),t.push(a)}}catch(l){i.e(l)}finally{i.f()}}for(;n<re;n+=ae){var o,u=Object(s.a)(pe(n));try{for(u.s();!(o=u.n()).done;){var h=o.value;h.moveToHeight(n+ie),t.push(h)}}catch(l){u.e(l)}finally{u.f()}}return t}function me(){return new c.m(h)}function be(e,t,n){if(e&&t&&n){var r=e.current,i=r.clientWidth,a=r.clientHeight;n&&(n.aspect=i/a,n.updateProjectionMatrix()),t.setSize(i,a)}}var Pe=n(154);function je(e,t,n){var r={frameId:null};return r.frameId=requestAnimationFrame((function(){return Oe(e,t,n,r)})),r}function Oe(e,t,n,r){e.clear("#ddd"),e.render(t,n),r.frameId=requestAnimationFrame((function(){return Oe(e,t,n,r)}))}function xe(e,t){var n=t.phaseDelta*e.y;return Math.sin(e.x*t.frequency+n)*t.amplitude+t.offset}var Me={productionWidth:2.5,baseWidth:150,baseLength:300,lengthBufferMultiplier:2,pinSpacing:220,diamondWidth:50,diamondHeight:110,diamondCount:3,pinDiameter0:40,pinDiameter1:20,pinDelta:250,pinDivisions:60,precision:2.5,bodyHeight:160,totalHeight:260,startHeight:-100,layerHeight:2.5,pattern:{patternFunction:xe,patternParameters:{amplitude:2,frequency:2*Math.PI/30,phaseDelta:0,offset:5,uv:!0}}};function Ce(e){var t=new c.l;!function(e){e.children=[];var t,n=Object(s.a)(we(Me));try{for(n.s();!(t=n.n()).done;){var r=t.value,i=u(r,r.getPointCount(),1.5,6,!1,me());e.add(i)}}catch(a){n.e(a)}finally{n.f()}}(t),x();var n=function(){var e=new c.s({antialias:!0,alpha:!0});return e.setPixelRatio(window.devicePixelRatio),e}();e.current.appendChild(n.domElement);var r=function(e){var t=e.clientWidth,n=e.clientHeight,r=new c.j(45,t/n);return r.position.z=500,r}(e.current);t.add(r);var i=function(e,t){var n=new Pe.a(e,t.domElement);return n.enableRotate=!0,n.enableKeys=!0,n.target.set(0,0),n.update(),n}(r,n);return be(e,n,r),{scene:t,renderer:n,camera:r,frameId:je(n,t,r),orbitControls:i}}function Ve(e,t,n){!function(e){var t=e.frameId;cancelAnimationFrame(t)}(n.frameId),e.current.removeChild(t.domElement)}n(164);var ke=n(157),Ie=n(150);n(172);n(168);var ze=n(61);var Ne=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useRef)(null);return Object(r.useEffect)((function(){console.log(e);var r=Ce(e),i=(r.scene,r.camera),a=r.renderer,o=r.frameId;return t.current=a,n.current=i,function(e){var t=new Ie.a,n={usdz:function(){console.log("export USDZ !?")}};return t.add(n,"usdz"),t}(),function(){Ve(e,a,o)}}),[t,n]),Object(ze.jsx)(ke.a,{bounds:!0,onResize:function(){be(e,t.current,n.current)},children:function(t){var n=t.measureRef;return Object(ze.jsx)("div",{className:"simple-3d",ref:n,children:Object(ze.jsx)("div",{className:"three-canvas",ref:e,tabIndex:0})})}})};var Se=function(){return Object(ze.jsxs)("div",{className:"app",children:[Object(ze.jsx)("div",{className:"container",children:Object(ze.jsx)(Ne,{})}),Object(ze.jsx)("a",{id:"link",rel:"ar",href:"",download:"asset.usdz",children:Object(ze.jsx)("img",{id:"button",width:"100",src:"files/arkit.png"})})]})},Te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,173)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};o.a.render(Object(ze.jsx)(i.a.StrictMode,{children:Object(ze.jsx)(Se,{})}),document.getElementById("root")),Te()}},[[171,1,2]]]);
//# sourceMappingURL=main.2aa3324e.chunk.js.map