(this["webpackJsonpclay-online"]=this["webpackJsonpclay-online"]||[]).push([[0],{163:function(e,t,n){},165:function(e,t,n){},169:function(e,t,n){},172:function(e,t,n){"use strict";n.r(t);var r=n(63),o=n.n(r),a=n(150),i=n.n(a),c=(n(163),n(23)),s=n(10);function u(e,t,n,r,o,a){var i=new s.TubeGeometry(e,t,n,r,o);return new s.Mesh(i,a)}var l={vertexShader:"\n            varying vec3 v_Normal;\n            void main() {\n                v_Normal = normal;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }",fragmentShader:"\n            varying vec3 v_Normal;\n            void main() {\n                gl_FragColor = vec4(v_Normal * .8, .8);\n                // vec3 grid = abs(fract(coord - 0.5) - 0.5) / fwidth(coord);\n    \n            }",transparent:!0,uniforms:{}},v={vertexShader:"\n            varying vec3 v_Position;\n            void main() {\n                v_Position = position;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }",fragmentShader:"\n            varying vec3 v_Position;\n            void main() {\n                vec3 grid = abs(fract(v_Position - .5) - .5) / fwidth(v_Position);\n                float line = min(min(grid.x, grid.y), grid.z);\n                float value = 2.5- min(line, 2.5);\n                float transparency = .1 + value * .9;\n\n                gl_FragColor = vec4(vec3(0.), transparency);\n                // vec3 grid = abs(fract(coord - 0.5) - 0.5) / fwidth(coord);\n            }",transparent:!0,uniforms:{},extensions:{derivatives:!0}},h=n(157),f=n(153),d=n(98),g=n(71),y=(n(171),n(154));function w(e){var t=new h.a;return t.setSites(e),t.setTolerance(.01),t.getTriangles(new g.b)}function p(e){var t={},n={},r={};for(var o in e._geometries){var a=e.getGeometryN(o).getCoordinates();if(4===a.length){var i=[0,0,0];for(var c in[0,1,2]){var u=a[c],l=JSON.stringify({x:u.x,y:u.y,z:.1}),v=Object.keys(t).length;l in t?i[c]=t[l]:(t[l]=v,r[l]=new s.Vector3(u.x,u.y,.1),i[c]=v)}for(var h in[0,1,2]){var f=i[h],d=i[(h+1)%3],g=Math.min(f,d),y=Math.max(f,d);n[JSON.stringify([g,y])]=[g,y]}}}var w={};for(var p in t){w[t[p]]=r[p]}var m=[];for(var b in n){var V=n[b][0],P=n[b][1],j=new s.LineCurve(w[V],w[P]);m.push(j)}return m}function m(e){var t=new s.BufferGeometry,n=[];for(var r in e._geometries){var o=e.getGeometryN(r).getCoordinates();if(4===o.length)for(var a in[0,1,2]){var i=o[a];n.push(i.x),n.push(i.y),n.push(.1)}}var c=new Float32Array(n);return t.setAttribute("position",new s.BufferAttribute(c,3)),t.computeVertexNormals(),t}function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32;return d.a.bufferOp(e,t,n)}function V(e,t){return e.difference(t)}function P(e,t){return e.intersection(t)}function j(e){var t=function(e){return 1===e.length?e[0]:(new g.b).createGeometryCollection(e).union()}(e);return y.a.union(t)}function O(){var e,t=function(e){var t,n=new f.a,r=[],o=Object(c.a)(e);try{for(o.s();!(t=o.n()).done;){var a=t.value;r.push(n.read(a))}}catch(i){o.e(i)}finally{o.f()}return r}(["POINT (-20 0)","POINT (20 0)","POINT (0 15)"]),n=[],r=Object(c.a)(t);try{for(r.s();!(e=r.n()).done;){var o=e.value;n.push(d.a.bufferOp(o,30,100))}}catch(a){r.e(a)}finally{r.f()}return j(n)}function x(){return function(e){var t=w(e);return{buffer:m(t),edges:p(t)}}(O())}var C=n(89),M=n(0),k=n(1),z=n(4),I=n(5),N=n(152),S=function(e){Object(z.a)(n,e);var t=Object(I.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Object(M.a)(this,n),(e=t.call(this)).scale=r,e}return Object(k.a)(n,[{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3,n=3*e-1.5,r=Math.sin(2*Math.PI*e),o=0;return t.set(n,r,o).multiplyScalar(this.scale)}}]),n}(s.Curve),A=(s.Curve,function(e){Object(z.a)(n,e);var t=Object(I.a)(n);function n(e){var r,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(M.a)(this,n),(r=t.call(this)).points=e,r.closed=o,r.init(),r}return Object(k.a)(n,[{key:"init",value:function(){this.dirs=this.getDirs(),this.arcLengthDivisions=this.getPointCount()}},{key:"getPointCount",value:function(){return this.closed?this.points.length:this.points.length-1}},{key:"getDirs",value:function(){for(var e=[],t=0;t<this.getPointCount();t++){var n=this.points[t],r=this.points[(t+1)%this.getPointCount()],o=(new s.Vector3).subVectors(r,n);e.push(o)}return e}},{key:"getLength",value:function(){var e=this.getLengths();return e[e.length-1]}},{key:"getLengths",value:function(){if(this.cacheArcLengths&&this.cacheArcLengths.length===this.getPointCount()+1&&!this.needsUpdate)return this.cacheArcLengths;var e=0;this.cacheArcLengths=[e];var t,n=Object(c.a)(this.dirs);try{for(n.s();!(t=n.n()).done;){e+=t.value.length(),this.cacheArcLengths.push(e)}}catch(r){n.e(r)}finally{n.f()}return this.cacheArcLengths}},{key:"getTangentAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3;return this.getTangent(e*this.getPointCount(),t)}},{key:"getTangent",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3,r=e%1,o=e-e%1;if(isNaN(e))return null;if(e>0&&e<this.getPointCount())if(r<1e-4){var a=(new s.Vector3).copy(this.dirs[o]),i=(new s.Vector3).copy(this.dirs[o-1]);i.normalize(),a.normalize(),t=(new s.Vector3).addVectors(i,a)}else t=(new s.Vector3).copy(this.dirs[o]);if(this.closed)if(o%=this.getPointCount(),r<1e-4){var c=(new s.Vector3).copy(this.dirs[o]),u=(new s.Vector3).copy(this.dirs[(o+this.getPointCount()-1)%this.getPointCount()]);u.normalize(),c.normalize(),t=(new s.Vector3).addVectors(u,c)}else t=(new s.Vector3).copy(this.dirs[o]);else t=e<1?(new s.Vector3).copy(this.dirs[0]):(new s.Vector3).copy(this.dirs[this.dirs.length-1]);return t.normalize(),n.set(t.x,t.y,t.z)}},{key:"computeFrenetFrames",value:function(e,t){for(var n=new s.Vector3,r=[],o=[],a=[],i=new s.Vector3,c=new s.Matrix4,u=0;u<=e;u++){var l=u/e;r[u]=this.getTangentAt(l,new s.Vector3)}o[0]=new s.Vector3,a[0]=new s.Vector3;var v=Number.MAX_VALUE,h=Math.abs(r[0].x),f=Math.abs(r[0].y),d=Math.abs(r[0].z);h<=v&&(v=h,n.set(1,0,0)),f<=v&&(v=f,n.set(0,1,0)),d<=v&&n.set(0,0,1),i.crossVectors(r[0],n).normalize(),o[0].crossVectors(r[0],i),a[0].crossVectors(r[0],o[0]);for(var g=1;g<=e;g++){if(o[g]=o[g-1].clone(),a[g]=a[g-1].clone(),i.crossVectors(r[g-1],r[g]),i.length()>Number.EPSILON){i.normalize();var y=Math.acos(Object(N.a)(r[g-1].dot(r[g]),-1,1));o[g].applyMatrix4(c.makeRotationAxis(i,y))}a[g].crossVectors(r[g],o[g])}if(!0===t){var w=Math.acos(Object(N.a)(o[0].dot(o[e]),-1,1));w/=e,r[0].dot(i.crossVectors(o[0],o[e]))>0&&(w=-w);for(var p=1;p<=e;p++)o[p].applyMatrix4(c.makeRotationAxis(r[p],w*p)),a[p].crossVectors(r[p],o[p])}return{tangents:r,normals:o,binormals:a}}},{key:"_tConstraining",value:function(e){var t=e%1,n=e-t;return this.closed?n%=this.getPointCount():n<0?(t+=n,n=0):n>=this.getPointCount()&&(t+=n-this.getPointCount(),n=this.getPointCount()),{locT:t,t0:n}}},{key:"getPointAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3;return this.getPoint(e,t)}},{key:"getPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new s.Vector3;e*=this.getPointCount();var n=this._tConstraining(e),r=n.locT,o=n.t0,a=this.points[o],i=this.dirs[o],c=(new s.Vector3).addVectors(a,(new s.Vector3).addScaledVector(i,r));return t.set(c.x,c.y,c.z)}},{key:"moveToHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Object(c.a)(this.points);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.z=t}}catch(o){n.e(o)}finally{n.f()}}},{key:"makeMeWave",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=2*e*Math.PI/this.getPointCount(),r=0,o=0;o<this.getPointCount();o++)this.points[o].z+=t*Math.sin(r),r+=n;this.init()}},{key:"getAllHeights",value:function(){var e,t=new Set,n=Object(c.a)(this.points);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.add(r.z)}}catch(o){n.e(o)}finally{n.f()}return t}}]),n}(s.Curve)),T=function(){function e(t){Object(M.a)(this,e),this.clayPoints=t}return Object(k.a)(e,[{key:"toPolygon",value:function(){var e,t=[],n=Object(c.a)(this.clayPoints);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.toCoordinate())}}catch(o){n.e(o)}finally{n.f()}return t.push(t[0]),(new g.b).createPolygon(t)}},{key:"toPolyline",value:function(){var e,t=[],n=Object(c.a)(this.clayPoints);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push(r.toVector3())}}catch(o){n.e(o)}finally{n.f()}return new A(t)}},{key:"moveToHeight",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=Object(c.a)(this.clayPoints);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.z=t}}catch(o){n.e(o)}finally{n.f()}}},{key:"applyPattern",value:function(e,t){if(t.uv){var n,r=Object(c.a)(this.clayPoints);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.set(e(o.uvValue,t))}}catch(u){r.e(u)}finally{r.f()}}else{var a,i=Object(c.a)(this.clayPoints);try{for(i.s();!(a=i.n()).done;){var s=a.value;s.set(e(s.origin,t))}}catch(u){i.e(u)}finally{i.f()}}}}]),e}();(new g.b).createLinearRing();function _(e){var t;return t=isNaN(e.z)?0:e.z,new s.Vector3(e.x,e.y,t)}function L(e){var t,n=[],r=Object(c.a)(e.getCoordinates());try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push(_(o))}}catch(a){r.e(a)}finally{r.f()}return n.pop(),new A(n)}function R(e){var t=[];if("MultiPolygon"===e.constructor.name){var n,r=Object(c.a)(e._geometries);try{for(r.s();!(n=r.n()).done;){var o,a=n.value,i=Object(c.a)(R(a));try{for(i.s();!(o=i.n()).done;){var s=o.value;t.push(s)}}catch(f){i.e(f)}finally{i.f()}}}catch(f){r.e(f)}finally{r.f()}return t}var u,l=function(e){var t=[];t.push(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)t.push(e.getInteriorRingN(n));return t}(e),v=Object(c.a)(l);try{for(v.s();!(u=v.n()).done;){var h=u.value;t.push(L(h))}}catch(f){v.e(f)}finally{v.f()}return t}var F=n(3);function E(e){var t=(new g.b).createPolygon(function(e){var t,n,r=[],o=Object(c.a)(e.points);try{for(o.s();!(t=o.n()).done;){var a=t.value;r.push((n=a,new F.a(n.x,n.y,n.z)))}}catch(i){o.e(i)}finally{o.f()}return r.push(r[0]),r}(e));return t}function D(e,t){var n=t.phaseDelta*e.y;return Math.sin(e.x*t.frequency+n)*t.amplitude+t.offset}var G={amplitude:2,frequency:2*Math.PI/30,phaseDelta:0,offset:5,uv:!0},H=2.5,W=n(10).Vector3,q=n(89).ClayPoint,B=2.5;function J(e){return-.08*e+40}function U(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=n*e,c=t+i,u=Math.cos(c),l=Math.sin(c),v=r*u,h=r*l,f=new q(new W(o.x+v,o.y+h,o.z),new W(u,l,0));return f.uvValue=new s.Vector2(a+i*r,o.z),f}function K(e,t,n,r,o,a){for(var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=Math.ceil(n*e/t),s=n/c,u=0;u<c;u++){var l=U(u,r,s,e,o,i);a.push(l)}return n*e+i}function X(e,t,n,r){for(var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=e.distanceTo(t),i=Math.ceil(a/n),c=(new W).addScaledVector((new W).subVectors(t,e),1/i),u=c.length(),l=new W(c.y/u,-c.x/u),v=0;v<i;v++){var h=(new W).addVectors(e,(new W).addScaledVector(c,v)),f=new q(h,l);f.uvValue=new s.Vector2(o+v*u,e.z),r.push(f)}return a+o}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new W(-75,0,e),n=new W(75,0,e),r=[],o=0;o=K(75,B,.5*Math.PI,Math.PI,t,r,o);var a=new W(-75,-75,e),i=new W(75,-75,e);o=X(a,i,B,r,o),o=K(75,B,Math.PI,-.5*Math.PI,n,r,o);var c=new W(75,75,e),s=new W(-75,75,e);o=X(c,s,B,r,o),K(75,B,.5*Math.PI,.5*Math.PI,t,r,o);var u=new T(r);return u}function Q(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(new W).addScaledVector((new W).subVectors(t,e),1/n),a=[],i=0,c=n+1;r||(i=1,c=n);for(var s=i;s<c;s++){var u=(new W).addVectors(e,(new W).addScaledVector(o,s));a.push(u)}return a}function Y(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.PI,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,a=n/o,i=[],c=0;c<o;c++){var s=r+c*a,u=t*Math.cos(s),l=t*Math.sin(s);i.push(new W(e.x+u,e.y+l,0))}return new A(i)}function $(e){return new A([new W(e.x+25,e.y,0),new W(e.x,e.y+55,0),new W(e.x-25,e.y,0),new W(e.x,e.y-55,0)])}function ee(e,t,n){return new A([new W(e.x+.5*t,e.y+.5*n,0),new W(e.x-.5*t,e.y+.5*n,0),new W(e.x-.5*t,e.y-.5*n,0),new W(e.x+.5*t,e.y-.5*n,0)])}function te(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=new W(-110,0),r=new W(110,0),o=Q(n,r,4,!1),a=[],i=Object(c.a)(o);try{for(i.s();!(e=i.n()).done;){var s=e.value,u=$(s),l=ee(s,H,300);a.push(u),a.push(l)}}catch(w){i.e(w)}finally{i.f()}var v=J(t);a.push(Y(n,.5*v,2*Math.PI,0,60)),a.push(Y(r,.5*v,2*Math.PI,0,60)),a.push(ee(n,H,300)),a.push(ee(r,H,300)),a.push(ee(new W(0,0,0),450,H));for(var h=[],f=0,d=a;f<d.length;f++){var g=d[f];h.push(E(g))}var y=j(h);return y}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=Z(e);console.log(t),t.applyPattern(D,G);var n,r=t.toPolygon(),o=b(r,-2.5,1),a=225,i=ee(new W(.5*-a,0,0),a,H),s=E(i),u=j([o,s]),l=te(e),v=P(u,l),h=V(r,v),f=R(h),d=Object(c.a)(f);try{for(d.s();!(n=d.n()).done;){var g=n.value;g.moveToHeight(e)}}catch(y){d.e(y)}finally{d.f()}return f}function re(){return new s.ShaderMaterial(v)}function oe(){var e,t=R(O()),n=new s.ShaderMaterial(l),r=[],o=Object(c.a)(t);try{for(o.s();!(e=o.n()).done;){var a=e.value;a.makeMeWave(4,10),r.push(u(a,a.getPointCount(),.5,6,!1,n))}}catch(i){o.e(i)}finally{o.f()}return r}function ae(e){e.add(function(){var e=re();return u(new S(10),100,2,32,!1,e)}());for(var t=1.25;t<160;t+=2.5){var n,r=Object(c.a)(ne(t));try{for(r.s();!(n=r.n()).done;){var o=n.value,a=u(o,o.getPointCount(),1.5,6,!1,new s.ShaderMaterial(l));e.add(a)}}catch(f){r.e(f)}finally{r.f()}}Object(C.clayPointTest)(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=[new C.ClayPoint(new s.Vector3(.5,.5,0),new s.Vector3(1,1,0)),new C.ClayPoint(new s.Vector3(-.5,.5,0),new s.Vector3(-1,1,0)),new C.ClayPoint(new s.Vector3(-.5,-.5,0),new s.Vector3(-1,-1,0)),new C.ClayPoint(new s.Vector3(.5,-.5,0),new s.Vector3(1,-1,0))];new T(t),e||console.log("is null !!!")}(e);var i,v=Object(c.a)(oe());try{for(v.s();!(i=v.n()).done;){var h=i.value;e.add(h)}}catch(f){v.e(f)}finally{v.f()}}function ie(e,t,n){if(e&&t&&n){var r=e.current,o=r.clientWidth,a=r.clientHeight;n&&(n.aspect=o/a,n.updateProjectionMatrix()),t.setSize(o,a)}}var ce=n(155);function se(e,t,n){var r={frameId:null};return r.frameId=requestAnimationFrame((function(){return ue(e,t,n,r)})),r}function ue(e,t,n,r){e.clear("#ddd"),e.render(t,n),r.frameId=requestAnimationFrame((function(){return ue(e,t,n,r)}))}function le(e){var t=new s.Scene;ae(t),x();var n=function(){var e=new s.WebGL1Renderer({antialias:!0,alpha:!0});return e.setPixelRatio(window.devicePixelRatio),e}();e.current.appendChild(n.domElement);var r=function(e){var t=e.clientWidth,n=e.clientHeight,r=new s.PerspectiveCamera(45,t/n);return r.position.z=500,r}(e.current);t.add(r);var o=function(e,t){var n=new ce.a(e,t.domElement);return n.enableRotate=!0,n.enableKeys=!0,n.target.set(0,0),n.update(),n}(r,n);return ie(e,n,r),{scene:t,renderer:n,camera:r,frameId:se(n,t,r),orbitControls:o}}function ve(e,t,n){!function(e){var t=e.frameId;cancelAnimationFrame(t)}(n.frameId),e.current.removeChild(t.domElement)}n(165);var he=n(158),fe=n(151);n(173);n(169);var de=n(61);var ge=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)(null),n=Object(r.useRef)(null);return Object(r.useEffect)((function(){console.log(e);var r=le(e),o=(r.scene,r.camera),a=r.renderer,i=r.frameId;return t.current=a,n.current=o,function(e){var t=new fe.a,n={usdz:function(){console.log("export USDZ !?")}};return t.add(n,"usdz"),t}(),function(){ve(e,a,i)}}),[t,n]),Object(de.jsx)(he.a,{bounds:!0,onResize:function(){ie(e,t.current,n.current)},children:function(t){var n=t.measureRef;return Object(de.jsx)("div",{className:"simple-3d",ref:n,children:Object(de.jsx)("div",{className:"three-canvas",ref:e,tabIndex:0})})}})};var ye=function(){return Object(de.jsxs)("div",{className:"app",children:[Object(de.jsx)("div",{className:"container",children:Object(de.jsx)(ge,{})}),Object(de.jsx)("a",{id:"link",rel:"ar",href:"",download:"asset.usdz",children:Object(de.jsx)("img",{id:"button",width:"100",src:"files/arkit.png"})})]})},we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,174)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,a=t.getLCP,i=t.getTTFB;n(e),r(e),o(e),a(e),i(e)}))};i.a.render(Object(de.jsx)(o.a.StrictMode,{children:Object(de.jsx)(ye,{})}),document.getElementById("root")),we()},89:function(e,t,n){"use strict";n.r(t),n.d(t,"ClayPoint",(function(){return c})),n.d(t,"clayPointTest",(function(){return s}));var r=n(0),o=n(1),a=n(10),i=n(71),c=function(){function e(t,n){Object(r.a)(this,e),this.origin=t,this.position=(new a.Vector3).copy(t),this.direction=n}return Object(o.a)(e,[{key:"move",value:function(e){this.position=(new a.Vector3).addVectors(this.position,(new a.Vector3).addScaledVector(this.direction,e))}},{key:"set",value:function(e){this.position=(new a.Vector3).addVectors(this.origin,(new a.Vector3).addScaledVector(this.direction,e))}},{key:"toCoordinate",value:function(){return new i.a(this.position.x,this.position.y,this.position.z)}},{key:"toVector3",value:function(){return(new a.Vector3).copy(this.position)}}]),e}();function s(){var e=new a.Vector3(0,0,0),t=new a.Vector3(1,0,0),n=new c(e,t);n.move(1),n.set(10)}}},[[172,1,2]]]);
//# sourceMappingURL=main.0fe3ec52.chunk.js.map